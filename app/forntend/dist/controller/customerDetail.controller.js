sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/core/date/UI5Date"],function(e,t,o){"use strict";return e.extend("forntend.controller.customerDetail",{onInit:function(){this.oRouter=this.getOwnerComponent().getRouter();this.oRouter.getRoute("RouteCustomerDetail").attachPatternMatched(this._onCustomerMatched,this);var e=new t({bEditMode:false});this.getView().setModel(e,"view");let o=new t;o.loadData(sap.ui.require.toUrl("forntend/model/cardManifests.json"));this.getView().setModel(o,"manifests")},_onCustomerMatched:function(e){let t=e.getParameter("arguments").customerId;if(t){this.getView().bindElement({path:`/customer(${t})`,model:"LibraryData",parameters:{expand:"BorrowedBooks, Reviews"}})}this._getCustomerDetails(t)},onNavBack:function(){const e=this.getOwnerComponent().getRouter();e.navTo("Routelist")},formatter:{Initials:function(e){e=e.split(" ");let t="";e.map(e=>{t=t+e[0]});console.log(t);return t}},_getCustomerDetails:function(e){let t=this.getView().getModel("manifests");let o=`${this.getOwnerComponent().getModel("LibraryData").getServiceUrl()}customer(${e})?$expand=BorrowedBooks,Reviews`;let r=this.getView().byId("objectCard");let s=this.getView().byId("tableCard");let a=this.getView().byId("reviewCard1");$.ajax({url:o,method:"GET",success:function(e){let o={Name:e.Name,Email:e.Email,Phone:e.Phone,Address:e.Address,CustomerType:e.CustomerType};console.log(e.Reviews);t.setProperty("/object/sap.card/data/json",o);t.setProperty("/tableCard/sap.card/data/json",e.BorrowedBooks);t.setProperty("/reviewCard/sap.card/content/data/json",e.Reviews);console.log(t.getProperty("/reviewCard/sap.card"));r.refresh();s.refresh();a.refresh()},error:function(e){console.log(e)}})},onCardReady:function(e){console.log(e)}})});
//# sourceMappingURL=customerDetail.controller.js.map