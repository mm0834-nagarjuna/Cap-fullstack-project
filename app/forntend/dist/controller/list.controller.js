sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/Column","sap/m/ColumnListItem","sap/m/Text","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/core/Fragment"],function(e,t,o,r,i,n,a,s){"use strict";return e.extend("frontend.controller.List",{onInit:function(){this.oModel=this.getOwnerComponent().getModel("LibraryData");this.oTitleSearch=this.byId("genreTitleSearch");this.oInitialSearch=this.byId("allTitleSearch");var e=new sap.ui.model.json.JSONModel({editMode:true,saveMode:false,tableEdit:false});this.getView().setModel(e,"ui")},onBookListItemPress:function(e){const t=e.getParameter("listItem");const o=t.getBindingContext("LibraryData");console.log(o);console.log(o.getObject());const r=o.getObject().BookID;console.log(r);let i=this.getOwnerComponent().getRouter();i.navTo("RouteBookdetail",{entityName2:"book",entityId2:r})},formatter:{statusState:function(e){if(e>0){return"Success"}return"Error"},stockWarning:function(e){if(e<=0){return"Out of Stock"}return e}},onSearchBookTitle:function(e){this._FilterHandler("Title",e.getSource().getValue(),"bookTable")},onTitleSearch:function(e){const t=e.getSource().getValue();const o=this.byId("bookTable").getBinding("items");console.log(o.getModel())},onSearchBorrowCustomer:function(e){this._FilterHandler("CustomerName",e.getSource().getValue(),"borrowedTable")},onSearchCustomer:function(e){this._FilterHandler("Name",e.getSource().getValue(),"customerTable")},_FilterHandler:function(e,t,o){let r=[];let i=t;if(i&&i.length>0){let t=new n(e,a.Contains,i);r.push(t)}let s=this.byId(o);let l=s.getBinding("items");l.filter(r)},onListItemPress:function(e){var t=e.getSource();var o=t.getBindingContext("LibraryData");var r=this.getView().byId("idIconTabBarStretchContent").getSelectedKey();console.log(r);if(r==="Book"){console.log(o.getProperty("BookID"));var i=o.getProperty("BookID");var n=o.getProperty("ISBN");this.getOwnerComponent().getRouter().navTo("RouteBookdetail",{bookId:i,ISBN:n})}else if(r==="Customer"){console.log(o.getProperty("CustomerId"));var i=o.getProperty("CustomerId");this.getOwnerComponent().getRouter().navTo("RouteCustomerDetail",{customerId:i})}},onEditBorrowedBook:function(){var e=this.getView().getModel("ui");e.setProperty("/editMode",false);e.setProperty("/saveMode",true);e.setProperty("/tableEdit",true);var t=this.getView().getModel("LibraryData");var o=e.getProperty("/selectedRow");console.log(o);t.refresh()},onSaveBorrowedBook:function(){var e=this.getView().getModel("ui");e.setProperty("/editMode",true);e.setProperty("/saveMode",false);e.setProperty("/tableEdit",false);var t=this.getView().getModel("LibraryData");t.refresh()},onCancelEditBorrowedBook:function(){var e=this.getView().getModel("ui");e.setProperty("/editMode",true);e.setProperty("/saveMode",false);e.setProperty("/tableEdit",false);var t=this.getView().getModel("LibraryData");var o=e.getProperty("/selectedRow");o.editable=false;t.refresh()},onNewBorrow:function(e){}})});
//# sourceMappingURL=list.controller.js.map